C251 COMPILER V5.60.0,  Main                                                               10/11/25  12:45:43  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE Main
OBJECT MODULE PLACED IN .\OUT\Main.obj
COMPILER INVOKED BY: D:\MDK\C251\BIN\C251.EXE USER\Main.C XSMALL INTR2 OPTIMIZE(3,SPEED) BROWSE INCDIR(.\USER;.\STC32GLI
                    -B) DEBUG PRINT(.\OUT\Main.lst) OBJECT(.\OUT\Main.obj) 

stmt  level    source

    1          //=================================================================================================
    2          // ļ: Main.C
    3          // ˵: Һģ 2.4ɫʾ 240*320 8λпģʽ
    4          // ڵ·: STC32G12K128 ʵV9.62 (л"չоƼ޹˾")
    5          // ı: (ֽһˮ) 2024-08-28 
    6          //=== Ӳ ====================================================================================
    7          //=========================================Դ================================================//
    8          //VDDDC 3.3VԴ
    9          //GNDӵ
   10          //=======================================Һ߽==========================================//
   11          //ģΪ8λ
   12          //Һģ               STC32G
   13          // LCD_D0~D7            P60~P67        //Һ8λ
   14          //=======================================Һ߽==========================================//
   15          //Һģ               STC32G
   16          // LCD_RS                P45           ///ѡź
   17          // LCD_RD                P44           //ź
   18          // LCD_RST               P43           //λź
   19          // LCD_WR                P42           //дź
   20          // LCD_CS                P34           //Ƭѡź
   21          //================================================================================================//
   22          // ʵʹõ2.4320*240Ĳڲ, ԭArduino 
   23          // ʵ:
   24          // 1, ָɫ; ʱ...
   25          // 2. 6*8ASCCIֿ⣬ʾַ
   26          // 3. 8*16ASCCIֿ⣬ʾַ
   27          // 4. ʾ12*24ַ
   28          // 5. 16*16Сֵģ⣻
   29          // 6. 24*24Сֵģ⣻
   30          // 7. 16Ļַʾ
   31          // 8. 24Ļַʾ
   32          // 9. ʵֻˮƽߡֱߡֱʾ
   33          // 10.ʵֶʽľηʾ 
   34          // 11.ʵBMPɫͼʾ
   35          // 12.ʵ˵Ͱ͹ťʾ
   36          // 13.ʵʾͼ߻ơ
   37          //**************************************************************************************************/
   38          #include "STC32G.H"
   39          #include "string.h"
   40          #include "stdio.h"
   41          #include "LCD9341.H"
   42          #include "PIC.H"
   43          
   44          //ȫֱ˵  
   45          char S[80];           //ַʾ
   46          unsigned int y0,y1;
   47          unsigned int n;
   48          unsigned int DelayNms;
   49          const unsigned char SIN[50]={
   50          120,126,136,145,153,162,169,175,181,186,188,192,193,193,192,188,186,181,175,169,162,153,145,136,126,  //
             -ϰ벨
   51          120,107, 97, 88, 80, 72, 65, 58, 48, 43, 42, 41, 40, 40, 41, 42, 43, 48, 58, 65, 72, 80, 88, 97,107,  //
             -°벨
   52          };
   53          
   54          //˵(main()֮һ㺯˵һ)
   55          void MainMenu(void);  //˵
   56          void Timer0_Init(void);
C251 COMPILER V5.60.0,  Main                                                               10/11/25  12:45:43  PAGE 2   

   57          
   58          //
   59          void main(void)
   60          { u16 i;
   61   1        SYS_Init();    //ϵͳʼ
   62   1              //Һʼ
   63   1      #if (USE_LCM==1)
   64   1        LCM_Config();  //LCMģʽʼ
   65   1      #endif
   66   1      #if (USE_LCM==1)
   67   1        DMA_Config();  //DMAģʽʼ
   68   1      #endif
   69   1        Timer0_Init(); //ʱ0ʼ
   70   1        EA=1;
   71   1              LCD_Init();
   72   1      //LCD_SetDIR(0);       //ԭʾ()
   73   1        LCD_SetDIR(3);       //ʾ()
   74   1              while(1)
   75   1        { for(i=0;i<16;i++)
   76   2          { DelayNms=0;                   //0  
   77   3            LCD_CLS((u8)i);               //Եɫ   
   78   3            sprintf(S," Time %04d ms ",DelayNms);
   79   3            LCD_Str16(20,20,S,15,0);      //ʾʱ
   80   3            sprintf(S," Color %02d RGB=%04X ",i,COLOR[i]);
   81   3            if(USE_LCM)strcat(S,"+LCM "); //LCMģʽ
   82   3            if(USE_DMA)strcat(S,"+DMA "); //DMAģʽ
   83   3            LCD_Str16(20,40,S,15,0);      //ʾַ..
   84   3            delay_ms(1000);
   85   3          }
   86   2          LCD_CLS(1);        //(ɫ)
   87   2          for(i=0;i<32;i++){ LCD_Box(i*10,215,10,20,15,15,(u8)i); } //32ɫŶ
   88   2          for(i=0;i<20;i++)LCD_Line(5,5,315,5+i*10,13);      //һ
   89   2          for(i=0;i<20;i++)LCD_Line(315,5,5,5+i*10,13);      //һ
   90   2          delay_ms(1000);               //ʱ1s
   91   2          for(i=0;i<11;i++)
   92   2          { LCD_LineH(5,5+i*20,310,10); //ˮƽ
   93   3            LCD_LineV(5+i*31,5,200,10); //ֱ
   94   3          }
   95   2          delay_ms(2000);
   96   2          MainMenu();                 //ͼɫʾ+Ļַ+˵ʾ 
   97   2          delay_ms(3000);             //ʱ3s  
   98   2          //ʾͼ...
   99   2          LCD_CLS(0);                 //(ɫ)
  100   2          LCD_BoxF(10,0,50,18,3,3);   //Բɫ
  101   2          LCD_BoxF(65,0,40,18,3,4);
  102   2          LCD_BoxF(110,0,68,18,3,7);
  103   2          LCD_A16(20,2,'A',15,3);     //ʾַ   
  104   2          LCD_A16(28,2,'U',15,3);     //װ 
  105   2          LCD_A16(36,2,'T',15,3);
  106   2          LCD_A16(44,2,'O',15,3);
  107   2          LCD_A16(72,2,'A',14,4);     //ʾַ 
  108   2          LCD_A16(80,2,'B',14,4);     //׻ 
  109   2          LCD_A16(88,2,'C',14,4);
  110   2          LCD_Str16(120,2,"STC32G",0,7); //ʾַ
  111   2          LCD_Str16(195,0,"8*16_ASCII_ABC",10,0); //ʾ16ַ
  112   2          LCD_Str8(10,226,"6*8_ASCII_ABCD",11,0); //ʾ8ַ
  113   2          for(i=0;i<7;i++)LCD_LineH0(10,45+25*i,301,5,10,0);  //7ˮƽ
  114   2          for(i=0;i<11;i++)LCD_LineV0(35+25*i,20,200,5,10,0); //11ֱ  
  115   2          LCD_LineH0(10,45+25*3-1,301,5,10,0);                //һˮƽ
  116   2          LCD_LineH0(10,45+25*3+1,301,5,10,0);
  117   2          LCD_LineV0(35+25*5-1,20,200,5,10,0);                //һֱ 
  118   2          LCD_LineV0(35+25*5+1,20,200,5,10,0);
  119   2          LCD_Box0(9,20,301,200,0,15);   //ķ 
  120   2          LCD_A08(  2,116,126,10,1);     //Сͷ
  121   2          LCD_A08(312,116,127,10,1);     //Сͷ
  122   2          delay_ms(1000);                //ʱ3s
C251 COMPILER V5.60.0,  Main                                                               10/11/25  12:45:43  PAGE 3   

  123   2          n=0;y0=SIN[n++];
  124   2          for(i=0;i<150;i++)
  125   2          { 
  126   3            y1=SIN[n];
  127   3            LCD_Line(10+i*2,y0,10+i*2+3,y1,14); //11ֱ
  128   3            y0=y1;
  129   3            n=n<49?n+1:0;
  130   3          }
  131   2          delay_ms(3000);                //ʱ3s
  132   2              //ѭи      
  133   2        }   
  134   1      }
  135          //˵ʾ...
  136          void MainMenu(void)
  137          { unsigned int m=0,n=0;
  138   1        //˵Ŀ...
  139   1        char * MU[4]={ "1.\xfd","2.Է","3.\xfdݹ","4.ϵͳά", };
  140   1      
  141   1        LCD_CLS(0);   //
  142   1        LCD_Box(0,0,319,20,2,2,0);
  143   1        LCD_Str16(14,2,"* MAIN MENU *",31,0);        //ɫ31
  144   1        LCD_Str16(160,2,"Ƭ STC32G12K128",10,0); //16ʾַ
  145   1        LCD_Str24(160,30,"ƬSTC32G",12,0);       //24ʾַ
  146   1        LCD_BMP(  8,160,64,64,P_SET);  //ʾɫͼ...
  147   1        LCD_BMP( 88,160,64,64,P_ZER);  //ʾɫͼ...
  148   1        LCD_BMP(168,160,64,64,P_XSW);  //ʾɫͼ...
  149   1        LCD_BMP(248,160,64,64,P_SYS);  //ʾɫͼ...
  150   1        LCD_HZ24(160,60,"",11,0);    //ʾ24󵥸
  151   1        LCD_HZ24(160,85,"Ƭ",11,0); 
  152   1        LCD_HZ24(160,110,"",11,0);
  153   1        LCD_Box(200, 64,110,80,3,3,3);
  154   1        LCD_Box(210, 72, 90,28,15,0,7);
  155   1        LCD_Box(210,106, 90,28,0,7,4);
  156   1        LCD_Str16(232, 78,"STC32G", 0,7); //ʾַ
  157   1        LCD_Str16(232,112,"STC32G",14,4); //ʾַ
  158   1        //˵...
  159   1        for(m=0;m<4;m++)
  160   1        { switch(m)
  161   2          { case 0: LCD_Box0(9,24+24*m,101,25,1,15); LCD_BoxF(10,25+m*24,99,22,1,1); break;
  162   3            case 1:
  163   3            case 2: LCD_Box0(9,24+24*m,101,25,0,15); LCD_BoxF(10,25+m*24,99,22,0,1); break;  
  164   3            case 3: LCD_Box0(9,24+24*m,101,25,2,15); LCD_BoxF(10,25+m*24,99,22,2,1); break;  
  165   3           }
  166   2           if(m==n){ LCD_Str16(20,29+24*m,MU[m],14,4); }
  167   2           else    { LCD_Str16(20,29+24*m,MU[m],15,1); }
  168   2        }
  169   1        //ʾ˵Ľƶ...  
  170   1        for(n=0;n<4;n++)
  171   1        {
  172   2          switch(n)
  173   2          { case 0: LCD_BoxF(10,25+n*24,99,22,1,4); LCD_Str16(20,29+24*n,MU[n],14,4); break;
  174   3            case 1:
  175   3            case 2: LCD_BoxF(10,25+n*24,99,22,0,4); LCD_Str16(20,29+24*n,MU[n],14,4); break;  
  176   3            case 3: LCD_BoxF(10,25+n*24,99,22,2,4); LCD_Str16(20,29+24*n,MU[n],14,4); break;  
  177   3          }
  178   2          delay_ms(500);
  179   2          switch(n)
  180   2          { case 0: LCD_BoxF(10,25+n*24,99,22,1,1); LCD_Str16(20,29+24*n,MU[n],15,1); break;
  181   3            case 1:
  182   3            case 2: LCD_BoxF(10,25+n*24,99,22,0,1); LCD_Str16(20,29+24*n,MU[n],15,1); break;  
  183   3          }
  184   2          delay_ms(10);
  185   2        }
  186   1      }
  187          
  188          //========================================================================
C251 COMPILER V5.60.0,  Main                                                               10/11/25  12:45:43  PAGE 4   

  189          // : void timer0_Init (void)
  190          // :  timer0ʼ.  //1@33.000MHz
  191          //========================================================================
  192          void Timer0_Init(void)          
  193          {
  194   1              AUXR |= 0x80;                   //ʱʱ1Tģʽ
  195   1              TMOD &= 0xF0;                   //öʱģʽ
  196   1              TL0 = 0x18;                             //öʱʼֵ
  197   1              TH0 = 0x7F;                             //öʱʼֵ
  198   1              TF0 = 0;                            //TF0־
  199   1              TR0 = 1;                      //ʱ0ʼʱ
  200   1        ET0 = 1;          //ж
  201   1      }
  202          //========================================================================
  203          // : void timer0_int (void) interrupt TIMER0_VECTOR
  204          // :  timer0жϺ.
  205          //========================================================================
  206          void timer0_int (void) interrupt 1
  207          {
  208   1        DelayNms++;     //ms
  209   1      }
  210          


Module Information          Static   Overlayable
------------------------------------------------
  code size            =     35165     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =        88         16
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =       252     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
