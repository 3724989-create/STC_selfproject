C251 COMPILER V5.60.0,  AI8051U_Soft_UART                                                  18/11/25  13:07:45  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE AI8051U_Soft_UART
OBJECT MODULE PLACED IN .\out_file\AI8051U_Soft_UART.obj
COMPILER INVOKED BY: D:\MDK\C251\BIN\C251.EXE ..\lq_libraries\Driver\Src\AI8051U_Soft_UART.c LARGE NOALIAS FLOAT64 WARNI
                    -NGLEVEL(3) OPTIMIZE(SIZE) BROWSE INCDIR(..\..\libraries\zf_common;..\..\libraries\zf_components;..\..\libraries\zf_devic
                    -e;..\..\libraries\zf_driver;..\user;..\code;..\Hardware;..\lq_libraries\LQ_LIB\Inc;..\lq_libraries\Include;..\lq_librari
                    -es\Driver\Inc) DEBUG PRINT(.\out_file\AI8051U_Soft_UART.lst) OBJECT(.\out_file\AI8051U_Soft_UART.obj) 

stmt  level    source

    1          /*---------------------------------------------------------------------*/
    2          /* ------------------- Web: www.STCAI.com -----------------------------*/
    3          /*---------------------------------------------------------------------*/
    4          
    5          /*************  功能说明        **************
    6          
    7          本文件为模拟串口发送程序, 一般为测试监控用.
    8          
    9          串口参数:9600,8,n,1.
   10          
   11          可以根据主时钟自动适应.
   12          
   13          ******************************************/
   14          
   15          #include "AI8051U_Soft_UART.h"
   16          
   17          sbit    P_TXD = P1^7;   //定义模拟串口发送端,可以是任意IO
   18          
   19          //========================================================================
   20          // 函数: void BitTime(void)
   21          // 描述: 位时间函数。
   22          // 参数: none.
   23          // 返回: none.
   24          // 版本: VER1.0
   25          // 日期: 2013-4-1
   26          // 备注:
   27          //========================================================================
   28          void BitTime(void)
   29          {
   30   1              u16 i;
   31   1              i = ((MAIN_Fosc / 100) * 138) / 80000L - 1;             //根据主时钟来计算位时间
   32   1              while(--i);
   33   1      }
   34          
   35          //========================================================================
   36          // 函数: void TxSend(uchar dat)
   37          // 描述: 模拟串口发送一个字节。9600，N，8，1
   38          // 参数: dat: 要发送的数据字节.
   39          // 返回: none.
   40          // 版本: VER1.0
   41          // 日期: 2013-4-1
   42          // 备注:
   43          //========================================================================
   44          void TxSend(u8 dat)
   45          {
   46   1              u8      i;
   47   1              EA = 0;
   48   1              P_TXD = 0;
   49   1              BitTime();
   50   1              for(i=0; i<8; i++)
   51   1              {
   52   2                      if(dat & 1)             P_TXD = 1;
   53   2                      else                    P_TXD = 0;
   54   2                      dat >>= 1;
   55   2                      BitTime();
   56   2              }
C251 COMPILER V5.60.0,  AI8051U_Soft_UART                                                  18/11/25  13:07:45  PAGE 2   

   57   1              P_TXD = 1;
   58   1              EA = 1;
   59   1              BitTime();
   60   1              BitTime();
   61   1      }
   62          
   63          //========================================================================
   64          // 函数: void PrintString(unsigned char code *puts)
   65          // 描述: 模拟串口发送一串字符串。9600，N，8，1
   66          // 参数: *puts: 要发送的字符指针.
   67          // 返回: none.
   68          // 版本: VER1.0
   69          // 日期: 2013-4-1
   70          // 备注:
   71          //========================================================================
   72          void PrintString(unsigned char code *puts)
   73          {
   74   1          for (; *puts != 0;  puts++)  TxSend(*puts);
   75   1      }
   76          


Module Information          Static   Overlayable
------------------------------------------------
  code size            =        92     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =    ------     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
