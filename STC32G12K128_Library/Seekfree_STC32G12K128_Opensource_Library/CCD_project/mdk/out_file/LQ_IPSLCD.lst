C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE LQ_IPSLCD
OBJECT MODULE PLACED IN .\out_file\LQ_IPSLCD.obj
COMPILER INVOKED BY: D:\MDK\C251\BIN\C251.EXE ..\lq_libraries\LQ_LIB\Src\LQ_IPSLCD.c LARGE NOALIAS FLOAT64 WARNINGLEVEL(
                    -3) OPTIMIZE(SIZE) BROWSE INCDIR(..\..\libraries\zf_common;..\..\libraries\zf_components;..\..\libraries\zf_device;..\..\
                    -libraries\zf_driver;..\user;..\code;..\Hardware;..\lq_libraries\LQ_LIB\Inc;..\lq_libraries\Include;..\lq_libraries\Drive
                    -r\Inc) DEBUG PRINT(.\out_file\LQ_IPSLCD.lst) OBJECT(.\out_file\LQ_IPSLCD.obj) 

stmt  level    source

    1          /*LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
    2           ¡¾Æ½    Ì¨¡¿±±¾©ÁúÇñÖÇÄÜ¿Æ¼¼STC32Î»ºËÐÄ°å
    3           ¡¾±à    Ð´¡¿ÁúÇñ¿Æ¼¼
    4           ¡¾E-mail  ¡¿chiusir@163.com
    5           ¡¾Èí¼þ°æ±¾¡¿V1.0 °æÈ¨ËùÓÐ£¬µ¥Î»Ê¹ÓÃÇëÏÈÁªÏµÊÚÈ¨
    6           ¡¾Ïà¹ØÐÅÏ¢²Î¿¼ÏÂÁÐµØÖ·¡¿
    7           ¡¾Íø    Õ¾¡¿http://www.lqist.cn
    8           ¡¾ÌÔ±¦µêÆÌ¡¿http://longqiu.taobao.com
    9           --------------------------------------------------------------------------------
   10           ¡¾  IDE  ¡¿ keil C251 V5.60
   11           ¡¾Target ¡¿ STC32G/STC8051U/AI8051U 32Î»Ä£Ê½
   12           ¡¾SYS CLK¡¿ 42 MHzÊ¹ÓÃÄÚ²¿¾§Õñ
   13          QQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQ*/
   14          
   15          
   16          #include "include.h"
   17          #include "LQ_IPSLCD.h"
   18          #include "font.h"
   19          /*!
   20            * @brief    IPS1.14³õÊ¼»¯
   21            * @return   ÎÞ
   22            * @note     Èç¹ûÐÞ¸Ä¹Ü½Å ÐèÒªÐÞ¸Ä³õÊ¼»¯µÄ¹Ü½Å
   23            * @see      LCD_Init();
   24            */
   25          void LCD_Init(void)
   26          {
   27   1      #if Use_HARDSPI
                       //´ý¶¨
               #else   //Èí¼þSPI¹Ü½Å³õÊ¼»¯
   30   1          GPIO_InitTypeDef    IPSLCD_Structure;
   31   1          //³õÊ¼»¯Èí¼þSPIÊ¹ÓÃÊÕ·¢¹Ü½Å£¬ÐèÒªÓëÊµ¼ÊÑ¡ÔñµÄ¹Ü½Å±£³ÖÒ»ÖÂ
   32   1          IPSLCD_Structure.Pin  = GPIO_Pin_2 | GPIO_Pin_4;              //Ö¸¶¨Òª³õÊ¼»¯µÄIO
   33   1          IPSLCD_Structure.Mode = GPIO_PullUp;                          //Ö¸¶¨IOÄÚ²¿ÉÏÀ­£¬×¼Ë«Ïò¿ÚÄ£Ê½
   34   1          GPIO_Inilize(GPIO_P3,&IPSLCD_Structure);
   35   1      #endif
   36   1          IPSLCD_Structure.Pin  = GPIO_Pin_1 | GPIO_Pin_5 | GPIO_Pin_6; //Ö¸¶¨Òª³õÊ¼»¯µÄIO
   37   1          IPSLCD_Structure.Mode = GPIO_PullUp;                          //Ö¸¶¨IOÄÚ²¿ÉÏÀ­£¬×¼Ë«Ïò¿ÚÄ£Ê½
   38   1          GPIO_Inilize(GPIO_P2,&IPSLCD_Structure);                      //³õÊ¼»¯£¬½á¹¹ÌåÅäÖÃ
   39   1          /*¸´Î»*/
   40   1          IPS_RST_L;
   41   1          delay_ms(100);
   42   1          IPS_RST_H;
   43   1          delay_ms(100);
   44   1      
   45   1          IPS_CS_L;
   46   1          delay_ms(150);
   47   1          LCD_Write_Cmd(0x11);
   48   1          delay_ms(120);
   49   1          LCD_Write_Cmd(0x36);
   50   1          if(USE_HORIZONTAL==0)LCD_Write_Byte(0x00);
   51   1          else if(USE_HORIZONTAL==1)LCD_Write_Byte(0xC0);
   52   1          else if(USE_HORIZONTAL==2)LCD_Write_Byte(0x70);
   53   1          else LCD_Write_Byte(0xA0);
   54   1      
   55   1          LCD_Write_Cmd(0x3A);
   56   1          LCD_Write_Byte(0x05);
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 2   

   57   1          LCD_Write_Cmd(0xB2);
   58   1          LCD_Write_Byte(0x0C);
   59   1          LCD_Write_Byte(0x0C);
   60   1          LCD_Write_Byte(0x00);
   61   1          LCD_Write_Byte(0x33);
   62   1          LCD_Write_Byte(0x33);
   63   1          LCD_Write_Cmd(0xB7);
   64   1          LCD_Write_Byte(0x35);
   65   1          LCD_Write_Cmd(0xBB);
   66   1          LCD_Write_Byte(0x19);
   67   1          LCD_Write_Cmd(0xC0);
   68   1          LCD_Write_Byte(0x2C);
   69   1          LCD_Write_Cmd(0xC2);
   70   1          LCD_Write_Byte(0x01);
   71   1          LCD_Write_Cmd(0xC3);
   72   1          LCD_Write_Byte(0x12);
   73   1          LCD_Write_Cmd(0xC4);
   74   1          LCD_Write_Byte(0x20);
   75   1          LCD_Write_Cmd(0xC6);
   76   1          LCD_Write_Byte(0x0F);
   77   1          LCD_Write_Cmd(0xD0);
   78   1          LCD_Write_Byte(0xA4);
   79   1          LCD_Write_Byte(0xA1);
   80   1          LCD_Write_Cmd(0xE0);
   81   1          LCD_Write_Byte(0xD0);
   82   1          LCD_Write_Byte(0x04);
   83   1          LCD_Write_Byte(0x0D);
   84   1          LCD_Write_Byte(0x11);
   85   1          LCD_Write_Byte(0x13);
   86   1          LCD_Write_Byte(0x2B);
   87   1          LCD_Write_Byte(0x3F);
   88   1          LCD_Write_Byte(0x54);
   89   1          LCD_Write_Byte(0x4C);
   90   1          LCD_Write_Byte(0x18);
   91   1          LCD_Write_Byte(0x0D);
   92   1          LCD_Write_Byte(0x0B);
   93   1          LCD_Write_Byte(0x1F);
   94   1          LCD_Write_Byte(0x23);
   95   1          LCD_Write_Cmd(0xE1);
   96   1          LCD_Write_Byte(0xD0);
   97   1          LCD_Write_Byte(0x04);
   98   1          LCD_Write_Byte(0x0C);
   99   1          LCD_Write_Byte(0x11);
  100   1          LCD_Write_Byte(0x13);
  101   1          LCD_Write_Byte(0x2C);
  102   1          LCD_Write_Byte(0x3F);
  103   1          LCD_Write_Byte(0x44);
  104   1          LCD_Write_Byte(0x51);
  105   1          LCD_Write_Byte(0x2F);
  106   1          LCD_Write_Byte(0x1F);
  107   1          LCD_Write_Byte(0x1F);
  108   1          LCD_Write_Byte(0x20);
  109   1          LCD_Write_Byte(0x23);
  110   1          LCD_Write_Cmd(0x21);
  111   1          LCD_Write_Cmd(0x29);
  112   1          delay_ms(20);
  113   1      }
  114          
  115          /*!
  116            * @brief    ¼òµ¥ÑÓÊ±º¯Êý
  117            *
  118            * @param    Del £ºÑÓÊ±Ê±¼ä
  119            *
  120            * @return   ÎÞ
  121            *
  122            * @note     ÄÚ²¿µ÷ÓÃ
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 3   

  123            *
  124            * @see      IPSdelay_1us(1);
  125            *
  126            */
  127          void IPSdelay_1us(unsigned int Del)     //
  128          {
  129   1          delay_us(Del);
  130   1      //  while(Del--)
  131   1      //  {
  132   1      //    __asm("NOP");
  133   1      //  }
  134   1      }
  135          
  136          /*!
  137            * @brief    Ð´ÃüÁî
  138            * @param    cmd £ºÃüÁî
  139            * @return   ÎÞ
  140            * @note     ÄÚ²¿µ÷ÓÃ
  141            * @see      LCD_Write_Cmd(0xb7); //LCD Driveing control
  142            */
  143          void LCD_Write_Cmd(unsigned char cmd)
  144          {
  145   1          unsigned char i;
  146   1          IPS_DC_L;// A0=0 ILI9163_A0=0;     //A0=0·¢ËÍÃüÁî
  147   1      #if Use_HARDSPI
                   SPI_Write_8Bit(SPI2,cmd);
               #else
  150   1      
  151   1          for(i=0;i<8;i++)
  152   1          {
  153   2              IPS_CK_L;                   // SCK=0
  154   2              if(cmd&0x80)
  155   2                  {
  156   3                      IPS_DI_H;               // SDI=1
  157   3                  }else{
  158   3                      IPS_DI_L;               // SDI=0
  159   3                  }
  160   2              IPS_CK_H;                   // SCK=1
  161   2              cmd <<= 1;
  162   2          }
  163   1      #endif
  164   1          IPS_DC_H;
  165   1      }
  166          
  167          /*!
  168            * @brief    Ð´×Ö½Ú
  169            * @param    dat £ºÊý¾Ý
  170            * @return   ÎÞ
  171            * @note     ÄÚ²¿µ÷ÓÃ
  172            * @see      LCD_Write_Byte(0x00); //CRL=0
  173            */
  174          void LCD_Write_Byte(unsigned char dat)
  175          {
  176   1          unsigned char i;
  177   1          IPS_DC_H;// A0=1  ILI9163_A0=1;         //A0=1·¢ËÍÊý¾Ý
  178   1      #if Use_HARDSPI
                   SPI_Write_8Bit(SPI2,dat);
               #else
  181   1      
  182   1          for(i=0;i<8;i++)
  183   1          {
  184   2              IPS_CK_L;   // SCK=0  ILI9163_SCK=0;
  185   2              if(dat&0x80){IPS_DI_H;}// SDI=1
  186   2              else{IPS_DI_L;}// SDI=0
  187   2              IPS_CK_H;   // SCK=1 ILI9163_SCK = 1;
  188   2              dat = (dat<<1);
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 4   

  189   2          }
  190   1      #endif
  191   1      }
  192          
  193          /*!
  194            * @brief    Ð´°ë×Ö
  195            * @param    dat £ºÊý¾Ý
  196            * @return   ÎÞ
  197            * @note     ÎÞ
  198            * @see      LCD_Write_Word(0xFFFF);
  199            */
  200          void LCD_Write_Word(unsigned int dat)
  201          {
  202   1          unsigned char i;
  203   1          IPS_DC_H;// A0=1  ILI9163_A0=1;
  204   1      #if Use_HARDSPI
                   SPI_Write_16Bit(SPI2,dat);
               #else
  207   1      
  208   1          for(i=0;i<16;i++)
  209   1          {
  210   2              IPS_CK_L;   // SCK=0  ILI9163_SCK=0;
  211   2              if(dat&0x8000){ IPS_DI_H;}// SDI=1
  212   2              else{IPS_DI_L;}// SDI=0
  213   2              IPS_CK_H;   // SCK=1  ILI9163_SCK=1;
  214   2              dat<<=1;
  215   2          }
  216   1      #endif
  217   1      
  218   1      }
  219          
  220          /******************************************************************************
  221                º¯ÊýËµÃ÷£ºÉèÖÃÆðÊ¼ºÍ½áÊøµØÖ·
  222                Èë¿ÚÊý¾Ý£ºx1,x2 ÉèÖÃÁÐµÄÆðÊ¼ºÍ½áÊøµØÖ·
  223                       y1,y2 ÉèÖÃÐÐµÄÆðÊ¼ºÍ½áÊøµØÖ·
  224                ·µ»ØÖµ£º  ÎÞ
  225          ******************************************************************************/
  226          void LCD_Address_Set(unsigned int x1,unsigned int y1,unsigned int x2,unsigned int y2)
  227          {
  228   1          int W_offset = 0, H_offset = 0;
  229   1          if(USE_HORIZONTAL==0)
  230   1          {
  231   2      #ifdef IPS114
  232   2              W_offset = 52; H_offset = 40;
  233   2      #endif
  234   2      #ifdef IPS130
                       W_offset = 0; H_offset = 0;
               #endif
  237   2      #ifdef IPS154
                       W_offset = 0; H_offset = 0;
               #endif
  240   2      #ifdef IPS200
                       W_offset = 0; H_offset = 0;
               #endif
  243   2          }
  244   1          else if(USE_HORIZONTAL==1)
  245   1          {
  246   2      #ifdef IPS114
  247   2              W_offset = 53; H_offset = 40;
  248   2      #endif
  249   2      #ifdef IPS130
                       W_offset = 0; H_offset = 80;
               #endif
  252   2      #ifdef IPS154
                       W_offset = 0; H_offset = 80;
               #endif
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 5   

  255   2      #ifdef IPS200
                       W_offset = 0; H_offset = 0;
               #endif
  258   2          }
  259   1          else if(USE_HORIZONTAL==2)
  260   1          {
  261   2      #ifdef IPS114
  262   2              W_offset = 40; H_offset = 53;
  263   2      #endif
  264   2      #ifdef IPS130
                       W_offset = 0; H_offset = 0;
               #endif
  267   2      #ifdef IPS154
                       W_offset = 0; H_offset = 0;
               #endif
  270   2      #ifdef IPS200
                       W_offset = 0; H_offset = 0;
               #endif
  273   2          }
  274   1          else
  275   1          {
  276   2      #ifdef IPS114
  277   2              W_offset = 40; H_offset = 52;
  278   2      #endif
  279   2      #ifdef IPS130
                       W_offset = 80; H_offset = 0;
               #endif
  282   2      #ifdef IPS154
                       W_offset = 80; H_offset = 0;
               #endif
  285   2      #ifdef IPS200
                       W_offset = 0; H_offset = 0;
               #endif
  288   2          }
  289   1          LCD_Write_Cmd(0x2a);//ÁÐµØÖ·ÉèÖÃ
  290   1          LCD_Write_Word(x1+W_offset);
  291   1          LCD_Write_Word(x2+W_offset);
  292   1          LCD_Write_Cmd(0x2b);//ÐÐµØÖ·ÉèÖÃ
  293   1          LCD_Write_Word(y1+H_offset);
  294   1          LCD_Write_Word(y2+H_offset);
  295   1          LCD_Write_Cmd(0x2c);//´¢´æÆ÷Ð´
  296   1      }
  297          
  298          /******************************************************************************
  299                º¯ÊýËµÃ÷£ºÔÚÖ¸¶¨Î»ÖÃ»­µã
  300                Èë¿ÚÊý¾Ý£ºx,y »­µã×ø±ê
  301                          color µãµÄÑÕÉ«
  302                ·µ»ØÖµ£º  ÎÞ
  303          ******************************************************************************/
  304          void LCD_DrawPoint(unsigned int x,unsigned int y,unsigned int color)
  305          {
  306   1          LCD_Address_Set(x,y,x,y);//ÉèÖÃ¹â±êÎ»ÖÃ
  307   1          LCD_Write_Word(color);
  308   1      }
  309          
  310          /******************************************************************************
  311                º¯ÊýËµÃ÷£ºÏÔÊ¾µ¥¸ö×Ö·û
  312                Èë¿ÚÊý¾Ý£ºx,yÏÔÊ¾×ø±ê
  313                          num ÒªÏÔÊ¾µÄ×Ö·û
  314                          fc ×ÖµÄÑÕÉ«
  315                          bc ×ÖµÄ±³¾°É«
  316                          sizey ×ÖºÅ£º¿ÉÑ¡12 16 24 32
  317                          mode:  0·Çµþ¼ÓÄ£Ê½  1µþ¼ÓÄ£Ê½
  318                ·µ»ØÖµ£º  ÎÞ
  319          ******************************************************************************/
  320          void LCD_ShowChar(unsigned int x,unsigned int y,unsigned char num,unsigned int fc,unsigned int bc,unsigne
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 6   

             -d char sizey,unsigned char mode)
  321          {
  322   1          unsigned char temp,sizex,t,m=0;
  323   1          unsigned int i,TypefaceNum;//Ò»¸ö×Ö·ûËùÕ¼×Ö½Ú´óÐ¡
  324   1          unsigned int x0=x;
  325   1          sizex=sizey/2;
  326   1          TypefaceNum=(sizex/8+((sizex%8)?1:0))*sizey;
  327   1          num=num-' ';    //µÃµ½Æ«ÒÆºóµÄÖµ
  328   1          LCD_Address_Set(x,y,x+sizex-1,y+sizey-1);  //ÉèÖÃ¹â±êÎ»ÖÃ
  329   1          for(i=0;i<TypefaceNum;i++)
  330   1          {
  331   2      //        if(sizey==12)temp=ascii_1206[num][i];              //µ÷ÓÃ6x12×ÖÌå  Ì«Ð¡£¬×Ö¿âÖÐÉ¾³ý£¬ÏëÓÃ¿´¿ÉÒÔ
             -ÔÚÌí¼Ó£¬µ«»áÔö¼Ó±àÒëºóµÄÎÄ¼þ´óÐ¡
  332   2      //        else
  333   2                  if(sizey==16)temp=ascii_1608[num][i];       //µ÷ÓÃ8x16×ÖÌå
  334   2              else if(sizey==24)temp=ascii_2412[num][i];       //µ÷ÓÃ12x24×ÖÌå
  335   2      //        else if(sizey==32)temp=ascii_3216[num][i];       //µ÷ÓÃ16x32×ÖÌå
  336   2              else return;
  337   2              for(t=0;t<8;t++)
  338   2              {
  339   3                  if(!mode)//·Çµþ¼ÓÄ£Ê½
  340   3                  {
  341   4                      if(temp&(0x01<<t))LCD_Write_Word(fc);
  342   4                      else LCD_Write_Word(bc);
  343   4                      m++;
  344   4                      if(m%sizex==0)
  345   4                      {
  346   5                          m=0;
  347   5                          break;
  348   5                      }
  349   4                  }
  350   3                  else//µþ¼ÓÄ£Ê½
  351   3                  {
  352   4                      if(temp&(0x01<<t))LCD_DrawPoint(x,y,fc);//»­Ò»¸öµã
  353   4                      x++;
  354   4                      if((x-x0)==sizex)
  355   4                      {
  356   5                          x=x0;
  357   5                          y++;
  358   5                          break;
  359   5                      }
  360   4                  }
  361   3              }
  362   2          }
  363   1      }
  364          
  365          /******************************************************************************
  366                º¯ÊýËµÃ÷£ºÏÔÊ¾×Ö·û´®
  367                Èë¿ÚÊý¾Ý£ºx,yÏÔÊ¾×ø±ê
  368                          *p ÒªÏÔÊ¾µÄ×Ö·û´®
  369                          fc ×ÖµÄÑÕÉ«
  370                          bc ×ÖµÄ±³¾°É«
  371                          sizey ×ÖºÅ£º¿ÉÑ¡12 16 24 32
  372                          mode:  0·Çµþ¼ÓÄ£Ê½  1µþ¼ÓÄ£Ê½
  373                ·µ»ØÖµ£º  ÎÞ
  374          ******************************************************************************/
  375          void LCD_ShowString(unsigned int x,unsigned int y, char *p,unsigned int fc,unsigned int bc,unsigned char 
             -sizey,unsigned char mode)
  376          {
  377   1          while(*p!='\0')
  378   1          {
  379   2              LCD_ShowChar(x,y,*p,fc,bc,sizey,mode);
  380   2              x+=sizey/2;
  381   2              p++;
  382   2          }
  383   1      }
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 7   

  384          
  385          /******************************************************************************
  386                º¯ÊýËµÃ÷£ºÏÔÊ¾12*06´óÐ¡µÄ×Ö·û´®
  387                Èë¿ÚÊý¾Ý£ºx    IPS114: ºá×ø±ê£¨ºáÆÁÊ±£º0-39     ÊúÆÁÊ±£º0-21£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-10     ÊúÆÁÊ±£º0
             --19£©
  388                       x  IPS130: ºá×ø±ê£¨ºáÆÁÊ±£º0-39      ÊúÆÁÊ±£º0-39£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-19     ÊúÆÁÊ±£º0-19£
             -©
  389                       x  IPS154: ºá×ø±ê£¨ºáÆÁÊ±£º0-39      ÊúÆÁÊ±£º0-39£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-19     ÊúÆÁÊ±£º0-19£
             -©
  390                       x  IPS200: ºá×ø±ê£¨ºáÆÁÊ±£º0-52      ÊúÆÁÊ±£º0-21£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-19     ÊúÆÁÊ±£º0-21£
             -©
  391                          *p  ÒªÏÔÊ¾µÄ×Ö·û´®
  392                          fc  ×ÖµÄÑÕÉ«
  393                          bc  ×ÖµÄ±³¾°É«
  394                ·µ»ØÖµ£º  ÎÞ
  395          ******************************************************************************/
  396          void LCD_ShowStr_12(unsigned int x,unsigned int y, char *p,unsigned int fc,unsigned int bc)
  397          {
  398   1          while(*p!='\0')
  399   1          {
  400   2              LCD_ShowChar(x*6,y*12,*p,fc,bc,12,0);
  401   2              x++;
  402   2              p++;
  403   2          }
  404   1      }
  405          /******************************************************************************
  406                º¯ÊýËµÃ÷£ºÏÔÊ¾16*08´óÐ¡µÄ×Ö·û´®
  407                Èë¿ÚÊý¾Ý£ºx    IPS114: ºá×ø±ê£¨ºáÆÁÊ±£º0-29     ÊúÆÁÊ±£º0-15£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-7     ÊúÆÁÊ±£º0-
             -14£©
  408                       x  IPS130: ºá×ø±ê£¨ºáÆÁÊ±£º0-29      ÊúÆÁÊ±£º0-29£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-14     ÊúÆÁÊ±£º0-14£
             -©
  409                       x  IPS154: ºá×ø±ê£¨ºáÆÁÊ±£º0-29      ÊúÆÁÊ±£º0-29£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-14     ÊúÆÁÊ±£º0-14£
             -©
  410                       x  IPS200: ºá×ø±ê£¨ºáÆÁÊ±£º0-39      ÊúÆÁÊ±£º0-21£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-14     ÊúÆÁÊ±£º0-21£
             -©
  411                ·µ»ØÖµ£º  ÎÞ
  412          ******************************************************************************/
  413          void LCD_ShowStr_16(unsigned int x,unsigned int y, char *p,unsigned int fc,unsigned int bc)
  414          {
  415   1          while(*p!='\0')
  416   1          {
  417   2              LCD_ShowChar(x*8,y*16,*p,fc,bc,16,0);
  418   2              x++;
  419   2              p++;
  420   2          }
  421   1      }
  422          /******************************************************************************
  423                º¯ÊýËµÃ÷£ºÏÔÊ¾24*12´óÐ¡µÄ×Ö·û´®
  424                Èë¿ÚÊý¾Ý£ºx    IPS114: ºá×ø±ê£¨ºáÆÁÊ±£º0-19     ÊúÆÁÊ±£º0-10£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-4     ÊúÆÁÊ±£º0-
             -9£©
  425                       x  IPS130: ºá×ø±ê£¨ºáÆÁÊ±£º0-19      ÊúÆÁÊ±£º0-21£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-9     ÊúÆÁÊ±£º0-21£©
  426                       x  IPS154: ºá×ø±ê£¨ºáÆÁÊ±£º0-39      ÊúÆÁÊ±£º0-21£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-19     ÊúÆÁÊ±£º0-21£
             -©
  427                       x  IPS200: ºá×ø±ê£¨ºáÆÁÊ±£º0-25      ÊúÆÁÊ±£º0-21£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-9     ÊúÆÁÊ±£º0-21£©
  428                          *p  ÒªÏÔÊ¾µÄ×Ö·û´®
  429                          fc  ×ÖµÄÑÕÉ«
  430                          bc  ×ÖµÄ±³¾°É«
  431                ·µ»ØÖµ£º  ÎÞ
  432          ******************************************************************************/
  433          void LCD_ShowStr_24(unsigned int x,unsigned int y, char *p,unsigned int fc,unsigned int bc)
  434          {
  435   1          while(*p!='\0')
  436   1          {
  437   2              LCD_ShowChar(x*12,y*24,*p,fc,bc,24,0);
  438   2              x++;
  439   2              p++;
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 8   

  440   2          }
  441   1      }
  442          /******************************************************************************
  443                º¯ÊýËµÃ÷£ºx    IPS114: ºá×ø±ê£¨ºáÆÁÊ±£º0-14     ÊúÆÁÊ±£º0-7£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-3     ÊúÆÁÊ±£º0-6
             -£©
  444                       x  IPS130: ºá×ø±ê£¨ºáÆÁÊ±£º0-14      ÊúÆÁÊ±£º0-21£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-6     ÊúÆÁÊ±£º0-21£©
  445                       x  IPS154: ºá×ø±ê£¨ºáÆÁÊ±£º0-14      ÊúÆÁÊ±£º0-21£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-6     ÊúÆÁÊ±£º0-21£©
  446                       x  IPS200: ºá×ø±ê£¨ºáÆÁÊ±£º0-19      ÊúÆÁÊ±£º0-21£© y ×Ý×ø±ê£¨ºáÆÁÊ±£º0-6     ÊúÆÁÊ±£º0-21£©
  447                          *p  ÒªÏÔÊ¾µÄ×Ö·û´®
  448                          fc  ×ÖµÄÑÕÉ«
  449                          bc  ×ÖµÄ±³¾°É«
  450                ·µ»ØÖµ£º  ÎÞ
  451          ******************************************************************************/
  452          void LCD_ShowStr_32(unsigned int x,unsigned int y, char *p,unsigned int fc,unsigned int bc)
  453          {
  454   1          while(*p!='\0')
  455   1          {
  456   2              LCD_ShowChar(x*16,y*32,*p,fc,bc,32,0);
  457   2              x++;
  458   2              p++;
  459   2          }
  460   1      }
  461          /******************************************************************************
  462                º¯ÊýËµÃ÷£ºÔÚÖ¸¶¨ÇøÓòÌî³äÑÕÉ«
  463                Èë¿ÚÊý¾Ý£ºxsta,ysta   ÆðÊ¼×ø±ê
  464                          xend,yend   ÖÕÖ¹×ø±ê
  465                                          color       ÒªÌî³äµÄÑÕÉ«
  466                ·µ»ØÖµ£º  ÎÞ
  467          ******************************************************************************/
  468          void LCD_Fill(unsigned int xsta,unsigned int ysta,unsigned int xend,unsigned int yend,unsigned int color)
  469          {
  470   1          unsigned int i,j;
  471   1          LCD_Address_Set(xsta,ysta,xend-1,yend-1);//ÉèÖÃÏÔÊ¾·¶Î§
  472   1          for(i=ysta;i<yend;i++)
  473   1          {
  474   2              for(j=xsta;j<xend;j++)
  475   2              {
  476   3                  LCD_Write_Word(color);
  477   3              }
  478   2          }
  479   1      }
  480          /******************************************************************************
  481                º¯ÊýËµÃ÷£ºÇåÆÁ
  482                Èë¿ÚÊý¾Ý£ºcolor       ÒªÌî³äµÄÑÕÉ«
  483                ·µ»ØÖµ£º  ÎÞ
  484          ******************************************************************************/
  485          void LCD_CLS(unsigned int color)
  486          {
  487   1          LCD_Fill(0,0,LCD_W,LCD_H,color);
  488   1      }
  489          
  490          
  491          /******************************************************************************
  492                º¯ÊýËµÃ÷£º»­Ïß
  493                Èë¿ÚÊý¾Ý£ºxs £ºÆðÊ¼x
  494                                          ys £ºÆðÊ¼y
  495                                          xe £º½áÊøx IPS114   (ºáÆÁx:0-240, ÊúÆÁx:0-135)
  496                                          xe £º½áÊøx IPS130  (ºáÆÁx:0-240, ÊúÆÁx:0-240)
  497                                          xe £º½áÊøx IPS154  (ºáÆÁx:0-240, ÊúÆÁx:0-240)
  498                                          xe £º½áÊøx IPS200  (ºáÆÁx:0-320, ÊúÆÁx:0-240)
  499                                          ys £º½áÊøy IPS114   (ºáÆÁy:0-135, ÊúÆÁx:0-240)
  500                                          ys £º½áÊøy IPS130  (ºáÆÁy:0-240, ÊúÆÁx:0-240)
  501                                          ys £º½áÊøy IPS154  (ºáÆÁy:0-240, ÊúÆÁx:0-240)
  502                                          ys £º½áÊøy IPS200  (ºáÆÁy:0-240, ÊúÆÁx:0-320)
  503                                          color_dat £ºÑÕÉ«
  504                ·µ»ØÖµ£º  ÎÞ
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 9   

  505          ******************************************************************************/
  506          void LCD_Draw_Line(unsigned char xs,unsigned char ys,unsigned char xe,unsigned char ye,unsigned short col
             -or_dat)
  507          {
  508   1        int i,ds;
  509   1        int dx,dy,inc_x, inc_y;
  510   1        int xerr = 0, yerr = 0;                       //³õÊ¼»¯±äÁ¿
  511   1      
  512   1        if(xs==xe)                            //Èç¹ûÊÇ»­´¹Ö±ÏßÔòÖ»Ðè¶ÔÊúÖ±×ø±ê¼ÆÊý
  513   1        {
  514   2          LCD_Address_Set(xs,ys,xe,ye);
  515   2          for(i=0;i<(ye-ys+1);i++)
  516   2          {
  517   3            LCD_Write_Word(color_dat);
  518   3          }
  519   2        }
  520   1        else if(ys==ye)                       //Èç¹ûÊÇË®Æ½ÏßÔòÖ»ÐèÒª¶ÔË®Æ½×ø±ê¼ÆÊý
  521   1        {
  522   2          LCD_Address_Set(xs,ys,xe,ye);
  523   2          for(i=0;i<(xe-xs+1);i++)
  524   2          {
  525   3            LCD_Write_Word(color_dat);
  526   3          }
  527   2        }
  528   1        else                              //Èç¹ûÊÇÐ±Ïß£¬ÔòÖØÐÂ¼ÆËã£¬Ê¹ÓÃ»­µãº¯Êý»­³öÖ±Ïß
  529   1        {
  530   2          dx = xe - xs;                       //¼ÆËã×ø±êÔöÁ¿
  531   2          dy = ye - ys;
  532   2      
  533   2          if(dx > 0) inc_x = 1;                   //ÉèÖÃµ¥²½·½Ïò
  534   2          else
  535   2          {
  536   3            inc_x = -1; dx = -dx;
  537   3          }
  538   2          if(dy > 0) inc_y = 1;                   //ÉèÖÃµ¥²½·½Ïò
  539   2          else
  540   2          {
  541   3            inc_y = -1; dy = -dy;
  542   3          }
  543   2      
  544   2          if(dx > dy) {ds = dx;}                  //Ñ¡È¡»ù±¾ÔöÁ¿×ø±êÖá
  545   2          else        {ds = dy;}
  546   2      
  547   2          for(i = 0; i <= ds+1; i++)                  //»­ÏßÊä³ö
  548   2          {
  549   3            LCD_DrawPoint(xs, ys,color_dat);  //»­µã
  550   3            xerr += dx;
  551   3            yerr += dy;
  552   3            if(xerr > ds)
  553   3            {
  554   4              xerr -= ds;
  555   4              xs   += inc_x;
  556   4            }
  557   3            if(yerr > ds)
  558   3            {
  559   4              yerr -= ds;
  560   4              ys   += inc_y;
  561   4            }
  562   3          }
  563   2        }
  564   1      }
  565          
  566          /******************************************************************************
  567                º¯ÊýËµÃ÷£º»­¾ØÐÎ¿ò
  568                Èë¿ÚÊý¾Ý£ºxs £ºÆðÊ¼x
  569                                          ys £ºÆðÊ¼y
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 10  

  570                                          xe £º½áÊøx IPS114   (ºáÆÁx:0-240, ÊúÆÁx:0-135)
  571                                          xe £º½áÊøx IPS130  (ºáÆÁx:0-240, ÊúÆÁx:0-240)
  572                                          xe £º½áÊøx IPS154  (ºáÆÁx:0-240, ÊúÆÁx:0-240)
  573                                          xe £º½áÊøx IPS200  (ºáÆÁx:0-320, ÊúÆÁx:0-240)
  574                                          ys £º½áÊøy IPS114   (ºáÆÁy:0-135, ÊúÆÁx:0-240)
  575                                          ys £º½áÊøy IPS130  (ºáÆÁy:0-240, ÊúÆÁx:0-240)
  576                                          ys £º½áÊøy IPS154  (ºáÆÁy:0-240, ÊúÆÁx:0-240)
  577                                          ys £º½áÊøy IPS200  (ºáÆÁy:0-240, ÊúÆÁx:0-320)
  578                                          color_dat £ºÑÕÉ«
  579                ·µ»ØÖµ£º  ÎÞ
  580          ******************************************************************************/
  581          void LCD_Draw_Rectangle(unsigned char xs,unsigned char ys,unsigned char xe,unsigned char ye,unsigned shor
             -t color_dat)
  582          {
  583   1        LCD_Draw_Line(xs,ys,xs,ye,color_dat);   //»­¾ØÐÎ×ó±ß
  584   1        LCD_Draw_Line(xe,ys,xe,ye,color_dat);   //»­¾ØÐÎÓÒ±ß
  585   1        LCD_Draw_Line(xs,ys,xe,ys,color_dat);   //»­¾ØÐÎÉÏ±ß
  586   1        LCD_Draw_Line(xs,ye,xe,ye,color_dat);   //»­¾ØÐÎÏÂ±ß
  587   1      }
  588          
  589          /******************************************************************************
  590                º¯ÊýËµÃ÷£º»­Ô²
  591                Èë¿ÚÊý¾Ý£ºx £ºÔ²ÐÄx IPS114    (ºáÆÁx:0-240, ÊúÆÁx:0-135)
  592                                IPS130  (ºáÆÁx:0-240, ÊúÆÁx:0-240)
  593                                IPS154  (ºáÆÁx:0-240, ÊúÆÁx:0-240)
  594                                 IPS200  (ºáÆÁx:0-320, ÊúÆÁx:0-240)
  595                      y £ºÔ²ÐÄy  IPS114   (ºáÆÁy:0-135, ÊúÆÁx:0-240)
  596                               IPS130  (ºáÆÁy:0-240, ÊúÆÁx:0-240)
  597                               IPS154  (ºáÆÁy:0-240, ÊúÆÁx:0-240)
  598                               IPS200  (ºáÆÁy:0-240, ÊúÆÁx:0-320)
  599                                          r £º°ë¾¶
  600                                          color_dat £ºÑÕÉ«
  601                ·µ»ØÖµ£º  ÎÞ
  602          ******************************************************************************/
  603          void LCD_Draw_Circle(unsigned char x,unsigned char y,unsigned char r,unsigned short color_dat)
  604          {
  605   1        unsigned char dx, dy = r;
  606   1      
  607   1        if((x>=r) &&((LCD_W-x)>=r) && (y>=r) && ((LCD_H-y)>=r))       //È·¶¨Ëù»­Ô²ÔÚÆÁÄ»·¶Î§ÄÚ£¬Ã»ÓÐ³¬³ö×îÍâ±ß£
             -¬(ÔÝ²»Ö§³ÖÓëÆÁÄ»±ßÏà½»)
  608   1        {
  609   2          for(dx = 0; dx <= r; dx++)
  610   2          {
  611   3            while((r * r + 1 - dx * dx) < (dy * dy)) dy--;
  612   3            LCD_DrawPoint(x + dx, y - dy, color_dat);
  613   3            LCD_DrawPoint(x - dx, y - dy, color_dat);
  614   3            LCD_DrawPoint(x - dx, y + dy, color_dat);
  615   3            LCD_DrawPoint(x + dx, y + dy, color_dat);
  616   3      
  617   3            LCD_DrawPoint(x + dy, y - dx, color_dat);
  618   3            LCD_DrawPoint(x - dy, y - dx, color_dat);
  619   3            LCD_DrawPoint(x - dy, y + dx, color_dat);
  620   3            LCD_DrawPoint(x + dy, y + dx, color_dat);
  621   3          }
  622   2        }
  623   1      }
  624          
  625          /******************************************************************************
  626                º¯ÊýËµÃ÷£ºÏÔÊ¾Í¼Æ¬
  627                Èë¿ÚÊý¾Ý£ºx,yÆðµã×ø±ê
  628                          length Í¼Æ¬³¤¶È
  629                          width  Í¼Æ¬¿í¶È
  630                          pic[]  Í¼Æ¬Êý×é
  631                ·µ»ØÖµ£º  ÎÞ
  632          ******************************************************************************/
  633          void LCD_ShowPicture(unsigned int x, unsigned int y, unsigned int length, unsigned int width,const unsign
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 11  

             -ed char pic[])
  634          {
  635   1          unsigned int i,j;
  636   1          unsigned long k=0;
  637   1          LCD_Address_Set(x,y,x+length-1,y+width-1);
  638   1          for(i=0;i<length;i++)
  639   1          {
  640   2              for(j=0;j<width;j++)
  641   2              {
  642   3                  LCD_Write_Byte(pic[k*2]);
  643   3                  LCD_Write_Byte(pic[k*2+1]);
  644   3                  k++;
  645   3              }
  646   2          }
  647   1      }
  648          /******************************************************************************
  649                º¯ÊýËµÃ÷£ºÏÔÊ¾µ¥¸ö12x12ºº×Ö
  650                Èë¿ÚÊý¾Ý£ºx,yÏÔÊ¾µÄÐÐÊýºÍÁÐÊý
  651                          *s_dat ÒªÏÔÊ¾µÄºº×Ö
  652                          word_color ×ÖµÄÑÕÉ«
  653                          back_color ×ÖµÄ±³¾°É«
  654                ·µ»ØÖµ£º  ÎÞ
  655          ******************************************************************************/
  656          void LCD_ShowChinese12x12(unsigned int x, unsigned int y,  char *s_dat,unsigned int word_color,unsigned i
             -nt back_color)
  657          {
  658   1          unsigned char wm=0,ii = 0,i,j;
  659   1          int adder=1;
  660   1          while(s_dat[ii] != '\0')
  661   1          {
  662   2              wm = 0;
  663   2              adder = 1;
  664   2              while(tfont_Idx[wm] > 127)
  665   2              {
  666   3                if(tfont_Idx[wm] == (uint8_t)s_dat[ii])
  667   3                {
  668   4                  if(tfont_Idx[wm + 1] == (uint8_t)s_dat[ii + 1])
  669   4                  {
  670   5                    adder = wm * 12;
  671   5                    break;
  672   5                  }
  673   4                }
  674   3                wm += 2;
  675   3              }
  676   2      
  677   2              if(adder != 1)// ÏÔÊ¾ºº×Ö
  678   2              {
  679   3                  LCD_Address_Set(x*12,y*12,(x+1)*12-1,(y+1)*12-1);         //¶¨Î»×Ö·ûÏÔÊ¾ÇøÓò
  680   3                for(j=0; j <24; j++)
  681   3                {
  682   4                    if((j%2) == 0){
*** WARNING C173 IN LINE 682 OF ..\lq_libraries\LQ_LIB\Src\LQ_IPSLCD.c: '==': signed/unsigned type mismatch
  683   5                        for(i=0; i<8; i++)
  684   5                        {
  685   6                            if((tfont_12x12[adder]) &  (0x80>>i))
  686   6                                LCD_Write_Word(word_color);
  687   6                            else
  688   6                                LCD_Write_Word(back_color);
  689   6                        }
  690   5                    }
  691   4                    else{
  692   5                        for(i=0; i<4; i++)
  693   5                        {
  694   6                            if((tfont_12x12[adder]) &  (0x80>>i))
  695   6                                LCD_Write_Word(word_color);
  696   6                            else
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 12  

  697   6                                LCD_Write_Word(back_color);
  698   6                        }
  699   5                    }
  700   4                  adder += 1;
  701   4                }
  702   3              }
  703   2              else              //ÏÔÊ¾¿Õ°××Ö·û
  704   2              {}
  705   2              //y+=1;//×óÓÒ·½Ïò
  706   2              x+=1;//ÉÏÏÂ·½Ïò
  707   2              ii += 2;
  708   2            }
  709   1      }
  710          
  711          /******************************************************************************
  712                º¯ÊýËµÃ÷£ºÏÔÊ¾µ¥¸ö16x16ºº×Ö
  713                Èë¿ÚÊý¾Ý£ºx,yÏÔÊ¾µÄÐÐÊýºÍÁÐÊý
  714                          *s_dat ÒªÏÔÊ¾µÄºº×Ö
  715                          word_color ×ÖµÄÑÕÉ«
  716                          back_color ×ÖµÄ±³¾°É«
  717                ·µ»ØÖµ£º  ÎÞ
  718          ******************************************************************************/
  719          void LCD_ShowChinese16x16(unsigned int x, unsigned int y,  char *s_dat,unsigned int word_color,unsigned i
             -nt back_color)
  720          {
  721   1          unsigned char wm=0,ii = 0,i,j;
  722   1          int adder=1;
  723   1          while(s_dat[ii] != '\0')
  724   1          {
  725   2              wm = 0;
  726   2              adder = 1;
  727   2              while(tfont_Idx[wm] > 127)
  728   2              {
  729   3                if(tfont_Idx[wm] == (uint8_t)s_dat[ii])
  730   3                {
  731   4                  if(tfont_Idx[wm + 1] == (uint8_t)s_dat[ii + 1])
  732   4                  {
  733   5                    adder = wm * 16;
  734   5                    break;
  735   5                  }
  736   4                }
  737   3                wm += 2;
  738   3              }
  739   2      
  740   2              if(adder != 1)// ÏÔÊ¾ºº×Ö
  741   2              {
  742   3                  LCD_Address_Set(x*16,y*16,(x+1)*16-1,(y+1)*16-1);         //¶¨Î»×Ö·ûÏÔÊ¾ÇøÓò
  743   3                for(j=0; j <32; j++)
  744   3                {
  745   4                  for(i=0; i<8; i++)
  746   4                  {
  747   5                    if((tfont_16x16[adder]) &  (0x80>>i))
  748   5                        LCD_Write_Word(word_color);
  749   5                    else
  750   5                        LCD_Write_Word(back_color);
  751   5                  }
  752   4                  adder += 1;
  753   4                }
  754   3              }
  755   2              else              //ÏÔÊ¾¿Õ°××Ö·û
  756   2              {}
  757   2              //y+=1;//×óÓÒ·½Ïò
  758   2              x+=1;//ÉÏÏÂ·½Ïò
  759   2              ii += 2;
  760   2            }
  761   1      }
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 13  

  762          
  763          /******************************************************************************
  764                º¯ÊýËµÃ÷£ºÏÔÊ¾µ¥¸ö24x24ºº×Ö
  765                Èë¿ÚÊý¾Ý£ºx,yÏÔÊ¾µÄÐÐÊýºÍÁÐÊý
  766                          *s_dat ÒªÏÔÊ¾µÄºº×Ö
  767                          word_color ×ÖµÄÑÕÉ«
  768                          back_color ×ÖµÄ±³¾°É«
  769                ·µ»ØÖµ£º  ÎÞ
  770          ******************************************************************************/
  771          void LCD_ShowChinese24x24(unsigned int x, unsigned int y,  char *s_dat,unsigned int word_color,unsigned i
             -nt back_color)
  772          {
  773   1          unsigned char wm=0,ii = 0,i,j;
  774   1          int adder=1;
  775   1          while(s_dat[ii] != '\0')
  776   1          {
  777   2              wm = 0;
  778   2              adder = 1;
  779   2              while(tfont_Idx[wm] > 127)
  780   2              {
  781   3                if(tfont_Idx[wm] == (uint8_t)s_dat[ii])
  782   3                {
  783   4                  if(tfont_Idx[wm + 1] == (uint8_t)s_dat[ii + 1])
  784   4                  {
  785   5                    adder = wm * 36;
  786   5                    break;
  787   5                  }
  788   4                }
  789   3                wm += 2;
  790   3              }
  791   2      
  792   2              if(adder != 1)// ÏÔÊ¾ºº×Ö
  793   2              {
  794   3                  LCD_Address_Set(x*24,y*24,(x+1)*24-1,(y+1)*24-1);         //¶¨Î»×Ö·ûÏÔÊ¾ÇøÓò
  795   3                for(j=0; j <72; j++)
  796   3                {
  797   4                  for(i=0; i<8; i++)
  798   4                  {
  799   5                    if((tfont_24x24[adder]) &  (0x80>>i))
  800   5                        LCD_Write_Word(word_color);
  801   5                    else
  802   5                        LCD_Write_Word(back_color);
  803   5                  }
  804   4                  adder += 1;
  805   4                }
  806   3              }
  807   2              else              //ÏÔÊ¾¿Õ°××Ö·û
  808   2              {}
  809   2              //y+=1;//×óÓÒ·½Ïò
  810   2              x+=1;//ÉÏÏÂ·½Ïò
  811   2              ii += 2;
  812   2            }
  813   1      }
  814          
  815          
  816          /******************************************************************************
  817                º¯ÊýËµÃ÷£ºÏÔÊ¾µ¥¸ö32x32ºº×Ö
  818                Èë¿ÚÊý¾Ý£ºx,yÏÔÊ¾µÄÐÐÊýºÍÁÐÊý
  819                          *s_dat ÒªÏÔÊ¾µÄºº×Ö
  820                          word_color ×ÖµÄÑÕÉ«
  821                          back_color ×ÖµÄ±³¾°É«
  822                ·µ»ØÖµ£º  ÎÞ
  823          ******************************************************************************/
  824          void LCD_ShowChinese32x32(unsigned int x, unsigned int y,  char *s_dat,unsigned int word_color,unsigned i
             -nt back_color)
  825          {
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 14  

  826   1          unsigned char wm=0,ii = 0,i,j;
  827   1          int adder=1;
  828   1          while(s_dat[ii] != '\0')
  829   1          {
  830   2              wm = 0;
  831   2              adder = 1;
  832   2              while(tfont_Idx[wm] > 127)
  833   2              {
  834   3                if(tfont_Idx[wm] == (uint8_t)s_dat[ii])
  835   3                {
  836   4                  if(tfont_Idx[wm + 1] == (uint8_t)s_dat[ii + 1])
  837   4                  {
  838   5                    adder = wm * 64;
  839   5                    break;
  840   5                  }
  841   4                }
  842   3                wm += 2;
  843   3              }
  844   2      
  845   2              if(adder != 1)// ÏÔÊ¾ºº×Ö
  846   2              {
  847   3                  LCD_Address_Set(x*32,y*32,(x+1)*32-1,(y+1)*32-1);         //¶¨Î»×Ö·ûÏÔÊ¾ÇøÓò
  848   3                for(j=0; j <128; j++)
  849   3                {
  850   4                  for(i=0; i<8; i++)
  851   4                  {
  852   5                    if((tfont_32x32[adder]) &  (0x80>>i))
  853   5                        LCD_Write_Word(word_color);
  854   5                    else
  855   5                        LCD_Write_Word(back_color);
  856   5                  }
  857   4                  adder += 1;
  858   4                }
  859   3              }
  860   2              else              //ÏÔÊ¾¿Õ°××Ö·û
  861   2              {}
  862   2              x+=1;//ÉÏÏÂ·½Ïò
  863   2              ii += 2;
  864   2            }
  865   1      }
  866          /******************************************************************************
  867                º¯ÊýËµÃ÷£ºÏÔÊ¾ºº×Ö´®
  868                Èë¿ÚÊý¾Ý£ºx,yÏÔÊ¾µÄÆðÊ¼ÐÐÊýºÍÁÐÊý
  869                          *s ÒªÏÔÊ¾µÄºº×Ö´®
  870                          fc ×ÖµÄÑÕÉ«
  871                          bc ×ÖµÄ±³¾°É«
  872                          sizey ×ÖºÅ ¿ÉÑ¡ 12 16 24 32
  873                ·µ»ØÖµ£º  ÎÞ
  874                      ±¸×¢  £º  ×Ö¿âÔÚfont.hÖÐ£¬È¡Ä£Ñ¡Ïî£ºËÎÌå£¬ÒõÂë£¬ÖðÐÐÊ½£¬µãÕó16*16£¬Ë³Ïò£¬Ê®Áù½øÖÆ£¬C51¸ñÊ½
  875          ******************************************************************************/
  876          void LCD_ShowChinese(unsigned int x,unsigned int y,char *s,unsigned int fc,unsigned int bc,unsigned char 
             -sizey)
  877          {
  878   1          while(*s!=0)
  879   1          {
  880   2              if(sizey==12) LCD_ShowChinese12x12(x,y,s,fc,bc);
  881   2              else
  882   2                  if(sizey==16) LCD_ShowChinese16x16(x,y,s,fc,bc);
  883   2              else if(sizey==24) LCD_ShowChinese24x24(x,y,s,fc,bc);
  884   2              else if(sizey==32) LCD_ShowChinese32x32(x,y,s,fc,bc);
  885   2              else return;
  886   2              s+=2;
  887   2              x++;
  888   2          }
  889   1      }
  890          
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 15  

  891          /*!
  892            * @brief    ÏÔÊ¾ÁúÇñLOG
  893            *
  894            * @param    ÎÞ
  895            *
  896            * @return   ÎÞ
  897            *
  898            * @note     ÎÞ
  899            *
  900            * @see      LCD_Show_Logo();
  901            */
  902          //void LCD_Show_Logo(unsigned char xs,unsigned char ys)
  903          //{
  904          //    LCD_ShowPicture(xs,ys,160,54,gImage_logo);
  905          //}
  906          
  907          /*!
  908            * @brief    IPSÆÁ unsigned int RGBÊý¾ÝÏÔÊ¾
  909            *
  910            * @param    high_start £º ÏÔÊ¾Í¼Ïñ¿ªÊ¼Î»ÖÃ
  911            * @param    wide_start £º ÏÔÊ¾Í¼Ïñ¿ªÊ¼Î»ÖÃ
  912            * @param    high £º ÏÔÊ¾Í¼Ïñ¸ß¶È
  913            * @param    wide £º ÏÔÊ¾Í¼Ïñ¿í¶È
  914            * @param    Pixle£º ÏÔÊ¾Í¼ÏñÊý¾ÝµØÖ·
  915            *
  916            * @return   ÎÞ
  917            *
  918            * @note     ×¢Òâ ÆÁÄ»×óÉÏÎª £¨0£¬0£©
  919            *
  920            * @see
  921            *
  922            * @date     2024/7/31
  923            */
  924          void LCDSPI_Road_RGB565(unsigned char wide_start, unsigned char high_start, unsigned char high, unsigned 
             -char wide, uint16_t *Pixle)
  925          {
  926   1          unsigned long i,j;
  927   1          /* ÉèÖÃÏÔÊ¾·¶Î§ */
  928   1          LCD_Address_Set(wide_start, high_start, wide_start + wide - 1, high_start + high - 1);
  929   1          for(i = 0; i < LCDH; i++)
  930   1              {
  931   2                  for(j = 0; j < LCDW; j ++)
  932   2                  {
  933   3                      /* ÏÔÊ¾ */
  934   3      //                color = Image_RGB565[i][j].R *2*2*2*2*2*2*2*2*2*2*2 +  Image_RGB565[i][j].G *2*2*2*2*2 
             -+ Image_RGB565[i][j].B;
  935   3                      LCD_Write_Word (*Pixle++);
  936   3      //                LCD_Write_Word (color);
  937   3                  }
  938   2              }
  939   1      }
  940          
  941          /*!
  942            * @brief    IPS114ÆÁ unsigned char »Ò¶ÈÊý¾ÝÏÔÊ¾
  943            *
  944            * @param    high_start £º ÏÔÊ¾Í¼Ïñ¿ªÊ¼Î»ÖÃ
  945            * @param    wide_start £º ÏÔÊ¾Í¼Ïñ¿ªÊ¼Î»ÖÃ
  946            * @param    high £º ÏÔÊ¾Í¼Ïñ¸ß¶È
  947            * @param    wide £º ÏÔÊ¾Í¼Ïñ¿í¶È
  948            * @param    Pixle£º ÏÔÊ¾Í¼ÏñÊý¾ÝµØÖ·
  949            *
  950            * @return   ÎÞ
  951            *
  952            * @note     ×¢Òâ ÆÁÄ»×óÉÏÎª £¨0£¬0£©
  953            *
  954            * @see
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 16  

  955            *
  956            * @date     2019/12/3 ÐÇÆÚ¶þ
  957            */
  958          void LCDSPI_Road(unsigned char wide_start, unsigned char high_start, unsigned char high, unsigned char wi
             -de, unsigned char *Pixle)
  959          {
  960   1          uint32_t i;
  961   1          uint16_t color;
  962   1          uint32_t temp = high * wide;
  963   1          /* ÉèÖÃÏÔÊ¾·¶Î§ */
  964   1          LCD_Address_Set(wide_start, high_start, wide_start - 1 + wide, high_start - 1 + high);
  965   1      
  966   1          /* ÏÔÊ¾Í¼Ïñ */
  967   1          for(i = 0; i < temp; i++)
  968   1          {
  969   2                  /* ½«»Ò¶È×ª»¯Îª RGB565 */
  970   2                  color = (Pixle[i] >> 3) << 11;
  971   2                  color |= (Pixle[i] >> 2) << 5;
  972   2                  color |= Pixle[i] >> 3;
  973   2      //            /* ÏÔÊ¾ */
  974   2                  LCD_Write_Word (color);
  975   2          }
  976   1      }
  977          
  978          /*!
  979            * @brief    IPS114ÆÁ unsigned char ¶þÖµ»¯Êý¾ÝÏÔÊ¾
  980            *
  981            * @param    high_start £º ÏÔÊ¾Í¼Ïñ¿ªÊ¼Î»ÖÃ
  982            * @param    wide_start £º ÏÔÊ¾Í¼Ïñ¿ªÊ¼Î»ÖÃ
  983            * @param    high £º ÏÔÊ¾Í¼Ïñ¸ß¶È
  984            * @param    wide £º ÏÔÊ¾Í¼Ïñ¿í¶È
  985            * @param    Pixle£º ÏÔÊ¾Í¼ÏñÊý¾ÝµØÖ·
  986            *
  987            * @return   ÎÞ
  988            *
  989            * @note     ×¢Òâ ÆÁÄ»×óÉÏÎª £¨0£¬0£©
  990            *
  991            * @see
  992            *
  993            * @date     2019/12/3 ÐÇÆÚ¶þ
  994            */
  995          void LCDSPI_BinRoad(unsigned char wide_start, unsigned char high_start, unsigned char high, unsigned char
             - wide, unsigned char *Pixle)
  996          {
  997   1          unsigned long i;
  998   1          unsigned long temp = high * wide;
  999   1          /* ÉèÖÃÏÔÊ¾·¶Î§ */
 1000   1          LCD_Address_Set(wide_start, high_start, wide_start - 1 + wide, high_start - 1 + high);
 1001   1      
 1002   1      
 1003   1          /* ÏÔÊ¾Í¼Ïñ */
 1004   1          for(i = 0; i < temp; i++)
 1005   1          {
 1006   2              if(Pixle[i])
 1007   2              {
 1008   3                  /* ÏÔÊ¾ */
 1009   3                  LCD_Write_Word (0xffff);
 1010   3              }
 1011   2              else
 1012   2              {
 1013   3                  /* ÏÔÊ¾ */
 1014   3                  LCD_Write_Word (0);
 1015   3              }
 1016   2          }
 1017   1      }
 1018          
C251 COMPILER V5.60.0,  LQ_IPSLCD                                                          18/11/25  13:07:49  PAGE 17  

 1019          ////////////////////////////////////////////////////////
 1020          //////////////////////////////////ÒÔÏÂ²¿·ÖÎª¹¦ÄÜ²âÊÔ//////////
 1021          /////IPSÆÁÄ»²âÊÔº¯Êý£¬ÆÁÄ»ÐÍºÅÔÚLQ_IPSLCD.hÖÐÍ¨¹ýºê¶¨ÒåÑ¡Ôñ//////////
 1022          // ×ÖÌå´óÐ¡½¨ÒéÊ¹ÓÃ16*8»ò24*12,×Ö¿âÖÐÒÑÉ¾³ý12*6ºÍ32*16µÄ£¬ÒÔ¼õÐ¡±àÒëºóµÄÎÄ¼þ´óÐ¡
 1023          
 1024          void Test_IPSLCD(void)
 1025          {
 1026   1          char txt[32];
 1027   1          unsigned short count = 1;
 1028   1          
 1029   1          GPIO_LED_Init();
 1030   1          LCD_Init();        //LCD³õÊ¼»¯  0:ºáÆÁ  1£ºÊúÆÁ
 1031   1          delay_ms(100);
 1032   1          LCD_Fill(0,0,240,240,WHITE);
 1033   1          delay_ms(200);
 1034   1          LCD_CLS(BLACK);
 1035   1          LCD_Draw_Line(50,50,200,130,GREEN);                       //»­Ïß
 1036   1          LCD_Draw_Rectangle(50,50,200,130,GREEN);                  //»­¾ØÐÎ¿ò
 1037   1          LCD_Draw_Circle(50, 50, 50, GREEN);                       //»­Ô²
 1038   1          delay_ms(1000);                                            //ÑÓÊ±µÈ´ý
 1039   1          LCD_CLS(BLACK);
 1040   1          LCD_ShowChinese(0,0,(char *)"±±¾©ÁúÇñ¿Æ¼¼",RED_IPS,WHITE,24);     //ÏÔÊ¾ºº×Ö
 1041   1          
 1042   1          while(1)
 1043   1          {
 1044   2              sprintf(txt, "Val:%05u", count++);                    //½«±äÁ¿Ìî³äµ½×Ö·û´®µÄ¶ÔÓ¦Î»ÖÃ£¬²¢½«×Ö·û´®´
             -æ·Åµ½txt[]ÖÐ
 1045   2              LCD_ShowStr_24(0,3,txt,RED_IPS,LIGHTBLUE);            //ÏÔÊ¾24*12×Ö·û´®
 1046   2            
 1047   2              LED_Ctrl(LED0,RVS);
 1048   2              delay_ms(50);              //ÑÓÊ±µÈ´ý
 1049   2          }
 1050   1      }
*** WARNING C177 IN LINE 50 OF ..\lq_libraries\LQ_LIB\Src\LQ_IPSLCD.c: unreachable code
*** WARNING C177 IN LINE 51 OF ..\lq_libraries\LQ_LIB\Src\LQ_IPSLCD.c: unreachable code
*** WARNING C177 IN LINE 52 OF ..\lq_libraries\LQ_LIB\Src\LQ_IPSLCD.c: unreachable code
*** WARNING C177 IN LINE 243 OF ..\lq_libraries\LQ_LIB\Src\LQ_IPSLCD.c: unreachable code
*** WARNING C177 IN LINE 258 OF ..\lq_libraries\LQ_LIB\Src\LQ_IPSLCD.c: unreachable code
*** WARNING C177 IN LINE 273 OF ..\lq_libraries\LQ_LIB\Src\LQ_IPSLCD.c: unreachable code
*** WARNING C183 IN LINE 228 OF ..\lq_libraries\LQ_LIB\Src\LQ_IPSLCD.c: dead assignment eliminated
*** WARNING C183 IN LINE 277 OF ..\lq_libraries\LQ_LIB\Src\LQ_IPSLCD.c: dead assignment eliminated
*** WARNING C183 IN LINE 228 OF ..\lq_libraries\LQ_LIB\Src\LQ_IPSLCD.c: dead assignment eliminated
*** WARNING C183 IN LINE 277 OF ..\lq_libraries\LQ_LIB\Src\LQ_IPSLCD.c: dead assignment eliminated


Module Information          Static   Overlayable
------------------------------------------------
  code size            =      5205     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------        238
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =     20836     ------
End of Module Information.


C251 COMPILATION COMPLETE.  11 WARNING(S),  0 ERROR(S)
