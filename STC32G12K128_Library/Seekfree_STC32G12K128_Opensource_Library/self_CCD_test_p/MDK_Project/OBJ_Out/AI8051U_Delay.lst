C251 COMPILER V5.60.0,  AI8051U_Delay                                                      18/11/25  13:39:14  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE AI8051U_Delay
OBJECT MODULE PLACED IN .\OBJ_Out\AI8051U_Delay.obj
COMPILER INVOKED BY: D:\MDK\C251\BIN\C251.EXE ..\..\libraries\Driver\Src\AI8051U_Delay.c XSMALL OPTIMIZE(6,SPEED) REGFIL
                    -E(.\OBJ_Out\LQ_STCAI32_LIB.ORC) BROWSE INCDIR(..\..\libraries\Driver;..\..\libraries\Driver\Inc;..\..\libraries\Include;
                    -..\..\libraries\LQ_LIB\Inc;..\User;..\code;..\Hardware;..\..\libraries\zf_common;..\..\Libraries\zf_components;..\..\Lib
                    -raries\zf_device;..\..\Libraries\zf_driver) DEFINE(STC32G) DEBUG PRINT(.\OBJ_Out\AI8051U_Delay.lst) OBJECT(.\OBJ_Out\AI8
                    -051U_Delay.obj) 

stmt  level    source

    1          /*---------------------------------------------------------------------*/
    2          /* ------------------- Web: www.STCAI.com -----------------------------*/
    3          /*---------------------------------------------------------------------*/
    4          
    5          #include        "AI8051U_Delay.h"
    6          
    7          //========================================================================
    8          // 函数: void delay_ms(unsigned int ms)
    9          // 描述: 延时函数。
   10          // 参数: ms,要延时的ms数, 这里只支持1~65535ms. 自动适应主时钟.
   11          // 返回: none.
   12          // 版本: VER1.0
   13          // 日期: 2021-3-9
   14          // 备注: 参考STC官方，比较精准且自适应主频
   15          //========================================================================
   16          void delay_ms(unsigned int ms)
   17          {
   18   1              unsigned int i;
   19   1              do{
   20   2                      i = MAIN_Fosc / 6000;
   21   2                      while(--i);
   22   2              }while(--ms);
   23   1      }
   24          
   25          
   26          //========================================================================
   27          // 函数: void delay_us(unsigned int us)
   28          // 描述: 延时函数。
   29          // 参数: us,要延时的us数,改变时钟频率后，可更换do while内循环使得延时准确
   30          // 版本: V1.0
   31          // 日期: 2024-12-9
   32          // 备注: 软件微秒延时  //@42MHz
   33          //========================================================================
   34          void delay_us(unsigned int us)
   35          {
   36   1              unsigned long edata i;
   37   1          do{
   38   2              _nop_();
   39   2              i = 9UL;
   40   2              while (i) i--;
   41   2          }while(us--);
   42   1      }
   43          
   44          
   45          //========================================================================
   46          // 函数: void I2C_Delay(void)
   47          // 描述: I2C延时函数.
   48          // 参数: none.
   49          // 返回: none.
   50          // 版本: V1.0, 2020-09-15
   51          //========================================================================
   52          void I2C_Delay_2us(void)
   53          {
   54   1              u8  dly;
   55   1              dly = MAIN_Fosc / 2000000UL;        //按2us计算
C251 COMPILER V5.60.0,  AI8051U_Delay                                                      18/11/25  13:39:14  PAGE 2   

   56   1              while(--dly);
   57   1      }


Module Information          Static   Overlayable
------------------------------------------------
  code size            =        54     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =    ------     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
